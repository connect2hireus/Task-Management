@{
    Ags_TaskManagement.BAL.Admin Model = ViewData["Employee"] as Ags_TaskManagement.BAL.Admin;
}

@{
    ViewBag.Title = "ADD EMPLOYEE";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Create Employee</h2>
@using (Html.BeginForm("EditEmployee", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                @Html.ValidationSummary(true)
                <div class="boxstyle pt-2 row form_design">
                    @Html.HiddenFor(model => Model.EmployeeID)
                    <div class="form-group col-md-4">
                        <label>Employee Name</label>
                        @Html.TextBoxFor(model => Model.FullName, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => Model.FullName, "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group col-md-4">
                        <label>Designation</label>
                        @*@Html.DropDownListFor(model => Model.Designation, new SelectList(ViewBag.Desig, "Value", "Text"), "Select Designation", new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => Model.Designation, "", new { @class = "text-danger" })*@
                        @if (Model.Designation != null)
                        {
                            @Html.DropDownListFor(model => Model.Designation, new SelectList(ViewBag.Desig, "Value", "Text", Model.Designation), "Select Designation", new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => Model.Designation, "", new { @class = "text-danger" })
                        }
                        else
                        {
                            @Html.DropDownListFor(model => Model.Designation, Enumerable.Empty<SelectListItem>(), "Select Designation", new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => Model.Designation, "", new { @class = "text-danger" })
                        }
                    </div>
                    <div class="form-group col-md-4">
                        <label>Role Name</label>
                        @*@Html.DropDownListFor(model => Model.RoleID, new SelectList(ViewBag.Role, "Value", "Text"), "Select Role", new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => Model.RoleID, "", new { @class = "text-danger" })*@
                        @if (Model.RoleID != null)
                        {
                            @Html.DropDownListFor(model => Model.RoleID, new SelectList(ViewBag.Role, "Value", "Text", Model.RoleID), "Select Role", new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => Model.RoleID, "", new { @class = "text-danger" })
                        }
                        else
                        {
                            @Html.DropDownListFor(model => Model.RoleID, Enumerable.Empty<SelectListItem>(), "Select Designation", new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => Model.RoleID, "", new { @class = "text-danger" })
                        }
                    </div>
                    <div class="form-group col-md-4">
                        <label>Official EmailID</label>
                        @Html.TextBoxFor(model => Model.OfficeEmailID, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => Model.OfficeEmailID, "", new { @class = "text-danger" })
                    </div>

                    <div class="form-group col-md-4">
                        <label>Personal MailId</label>
                        @Html.TextBoxFor(model => Model.PersonalMailId, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => Model.PersonalMailId, "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group col-md-4">
                        <label>Official MobileNo</label>
                        @Html.TextBoxFor(model => Model.OfficeMobileNo, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => Model.OfficeMobileNo, "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group col-md-4">
                        <label>Personal MobileNo</label>
                        @Html.TextBoxFor(model => Model.PersonalMobileNumber, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => Model.PersonalMobileNumber, "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group col-md-4">
                        <label>Job Country</label>
                        @Html.DropDownListFor(model => Model.JobCountry, new SelectList(ViewBag.Country, "Value", "Text", Model.JobCountry), "Select Country", new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => Model.JobCountry, "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group col-md-4">
                        <label>Job State</label>
                        @*@Html.DropDownList("JobState", new SelectList(string.Empty, "Value", "Text"), "Select State", new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => Model.JobState, "", new { @class = "text-danger" })*@
                        @if (Model.JobState != null)
                        {
                            @Html.DropDownListFor(model => Model.JobState, new SelectList(ViewBag.States, "Value", "Text", Model.JobState), "Select State", new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => Model.JobState, "", new { @class = "text-danger" })
                        }
                        else
                        {
                            @Html.DropDownListFor(model => Model.JobState, Enumerable.Empty<SelectListItem>(), "Select State", new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => Model.JobState, "", new { @class = "text-danger" })
                        }
                    </div>

                    <div class="form-group col-md-4">
                        <label>Job City</label>
                        @*@Html.DropDownList("JobCity", new SelectList(string.Empty, "Value", "Text"), "Select City", new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => Model.JobCity, "", new { @class = "text-danger" })*@
                        @if (Model.JobCity != null)
                        {
                            @Html.DropDownListFor(model => Model.JobCity, new SelectList(ViewBag.City, "Value", "Text", Model.JobCity), "Select City", new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => Model.JobCity, "", new { @class = "text-danger" })
                        }
                        else
                        {
                            @Html.DropDownListFor(model => Model.JobCity, Enumerable.Empty<SelectListItem>(), "Select City", new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => Model.JobCity, "", new { @class = "text-danger" })
                        }
                    </div>
                    <div class="form-group col-md-4">
                        <label>Job Location</label>
                        @Html.TextBoxFor(model => Model.JobLocation, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => Model.JobLocation, "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group col-md-4">
                        <label>Pin Code</label>
                        @Html.TextBoxFor(model => Model.ObjPinCode, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => Model.ObjPinCode, "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group col-md-4">
                        <label>Communication Skill</label>
                        @Html.TextBoxFor(model => Model.CommunicationSkill, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => Model.CommunicationSkill, "", new { @class = "text-danger" })
                    </div>

                    <div class="form-group col-md-4">
                        <label>Password</label>
                        @Html.TextBoxFor(model => Model.Password, new { @class = "form-control", type = "password" })
                        @Html.ValidationMessageFor(model => Model.Password, "", new { @class = "text-danger" })
                    </div>


                    @*<div class="form-group col-md-4">
                            <label>Qualification</label>
                            @Html.TextBoxFor(model => Model.Qualification, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => Model.Qualification, "", new { @class = "text-danger" })
                        </div>*@
                    <div class="form-group col-md-4">
                        <label>Communication Address</label>
                        @Html.TextBoxFor(model => Model.CommunicationAddress, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => Model.CommunicationAddress, "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group col-md-4">
                        <label>Permanent Address</label>
                        @Html.TextBoxFor(model => Model.PermanentAddress, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => Model.PermanentAddress, "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group col-md-4">
                        <label>Adhaar Number</label>
                        @Html.TextBoxFor(model => Model.AdhaarNo, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => Model.AdhaarNo, "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group col-md-4">
                        <label>PAN Number</label>
                        @Html.TextBoxFor(model => Model.PANNO, new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => Model.PANNO, "", new { @class = "text-danger" })
                    </div>

                    <div class="form-group col-md-4">
                        <label>Profile Pic</label>
                        @Html.TextBoxFor(model => Model.ProfilePic, null, new { @class = "form-control", type = "file" })
                        @Html.ValidationMessageFor(model => Model.ProfilePic, "", new { @class = "text-danger" })
                    </div>

                    <div class=" form-group col-md-12">
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

}

@section scripts
{
    <script type="text/javascript" language="javascript">
        $(document).ready(function () {

            //bind states
            $('#JobCountry').change(function () {
                if ($(this).children("option:selected").val() != '') {

                    var id = $(this).children("option:selected").val();
                    $.ajax({
                        url: '@Url.Action("GetStates", "Manager")',
                        datatype: 'json',
                        type: 'get',
                        contenttype: 'application/json',
                        data: {id:id},
                        success: function (State) {
                            if (State != 'Notfound') {
                                $("#JobState").empty();
                                $("#JobState").append('<option value="">Select State</option>');

                                $.each(State, function (i, state) {

                                    $("#JobState").append('<option value="' + state.Value + '">' +
                                        state.Text + '</option>');
                                    // here we are adding option for States


                                });
                            }
                            else {
                                $("#JobState").empty();
                                $("#JobState").append('<option value="">Select State</option>');
                            }
                        },
                        error: function () {
                            alert("Error!. something wrong")
                        }
                    });

                }
            });

            //bind City
            $('#JobState').change(function () {
                if ($(this).children("option:selected").val() != '') {

                    var id = $(this).children("option:selected").val();
                    $.ajax({
                       url: '@Url.Action("GetCities", "Manager")',
                        datatype: 'json',
                        type: 'get',
                        contenttype: 'application/json',
                        data: {id:id},
                        success: function (City) {
                            if (City != 'Notfound') {
                                $("#JobCity").empty();
                                $("#JobCity").append('<option value="">Select City</option>');

                                $.each(City, function (i, city) {

                                    $("#JobCity").append('<option value="' + city.Value + '">' +
                                        city.Text + '</option>');
                                    // here we are adding option for CITY


                                });
                            }
                            else {
                                $("#JobCity").empty();
                                $("#JobCity").append('<option value="">Select City</option>');
                            }
                        },
                        error: function () {
                            alert("Error!. something wrong")
                        }
                    });

                }
            });

        });
    </script>
}